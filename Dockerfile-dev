FROM python:3.8-alpine

RUN apk add build-base

WORKDIR /srv/code

EXPOSE 8000

COPY requirements.txt .
COPY requirements_production.txt .
RUN pip install --no-cache-dir --requirement requirements.txt

COPY gunicorn_conf.py .

CMD [ "gunicorn", "--config=python:gunicorn_conf", "--reload", "openslides_backend.main:application" ]

COPY openslides_backend/ ./openslides_backend/
